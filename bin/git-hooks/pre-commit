#!/bin/zsh

# Get the repository root
REPO_ROOT="$(git rev-parse --show-toplevel)"

# Path to the format script and config
FORMAT_SCRIPT="$REPO_ROOT/bin/git-hooks/format"
CONFIG_PATH="$REPO_ROOT/App/FreshWall/.swiftformat"

# Check if format script exists
if [[ ! -f "$FORMAT_SCRIPT" ]]; then
  echo "‚ùå Format script not found at: $FORMAT_SCRIPT"
  exit 1
fi

# Check if config file exists
if [[ ! -f "$CONFIG_PATH" ]]; then
  echo "‚ùå SwiftFormat config not found at: $CONFIG_PATH"
  exit 1
fi

# Run the format script with auto-accept mode and config path
echo "üîß Running format script with auto-accept mode and config: $CONFIG_PATH"
"$FORMAT_SCRIPT" --auto-accept --config "$CONFIG_PATH"

# Exit with the same code as the format script
exit $?